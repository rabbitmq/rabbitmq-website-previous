<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  <head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="description" content="RabbitMQ is a complete and highly reliable enterprise messaging system based on the emerging AMQP standard" /><meta name="googlebot" content="NOODP" /><meta name="google-site-verification" content="nSYeDgyKM9mw5CWcZuD0xu7iSWXlJijAlg9rcxVOYf4" /><meta name="google-site-verification" content="6UEaC3SWhpGQvqRnSJIEm2swxXpM5Adn4dxZhFsNdw0" /><link rel="stylesheet" href="/v2_8_x/css/rabbit.css" type="text/css" /><style xmlns:html="http://www.w3.org/1999/xhtml" xmlns:doc="http://www.rabbitmq.com/namespaces/ad-hoc/doc">
    body { 
    background: 
    url(/v2_8_x/img/previous-bg.png);
   }
  </style><link rel="icon" type="/image/vnd.microsoft.icon" href="/v2_8_x/favicon.ico" /><link rel="stylesheet" href="/v2_8_x/css/tutorial.css" type="text/css" /><script type="text/javascript" src="/v2_8_x/js/site.js"></script><script type="text/javascript" src="/v2_8_x/js/ga-bootstrap.js"></script><title>RabbitMQ - Installing on Windows (manual)</title>
    
  </head>
  <body><div id="outerContainer"><div id="rabbit-logo"><a href="/v2_8_x/"><img src="/v2_8_x/img/rabbitmq_logo_strap.png" alt="RabbitMQ" width="253" height="53" /></a></div><div id="vmw-logo"><a href="http://www.vmware.com/"><img src="/v2_8_x/img/vmw_logo_09q3.png" alt="VMware" width="118" height="18" /></a></div><div id="nav-search"><ul class="mainNav"><li><a href="/v2_8_x/download.html" class="selected">Installation</a></li><li><a href="/v2_8_x/documentation.html">Documentation</a></li><li><a href="/v2_8_x/getstarted.html">Tutorials</a></li><li><a href="/v2_8_x/services.html">Services</a></li><li><a href="/v2_8_x/community.html">Community</a></li></ul></div><div class="nav-separator"></div><div id="left-content"><h1>Installing on Windows (manual)</h1>
    <div class="docSection"><a name="install-windows-separately" id="install-windows-separately"></a>
      <p>
        If you should ever need to install RabbitMQ manually, this is how to do it:
      </p>
      <h3>Download the Server</h3>
      <table class="downloads" border="0" cellpadding="0" cellspacing="0"><tr><th class="desc">Description</th><th>Download </th><th> </th></tr>
        <tr><td class="desc" id="">
	  Packaged for Windows systems (zip)
        </td><td><a class="adownload" href="/releases/rabbitmq-server/v2.8.7/rabbitmq-server-windows-2.8.7.zip">rabbitmq-server-windows-2.8.7.zip</a></td><td class="signature"><a href="/releases/rabbitmq-server/v2.8.7/rabbitmq-server-windows-2.8.7.zip.asc">(Signature)</a></td></tr>
      </table>

      <h3>Install Erlang</h3>
      <p>
        Run the <a href="http://www.erlang.org/download.html">Erlang Windows Binary File</a>.
        Erlang will appear in the Start Menu,
        and <span class="code ">\erl<var>x.x.x</var>\bin\erl.exe</span> will be in
        <span class="code ">C:\Program Files (x86)</span> or <span class="code ">C:\Program Files</span>, depending on
        your platform and whether you chose a 32bit or 64bit version of Erlang.
      </p>

      <h3>Set ERLANG_HOME</h3>
      <p>
        If you have an existing RabbitMQ installation with the broker running as a service and
        you installed an Erlang VM with a different architecture then you must uninstall the
        service before updating <span class="envvar">ERLANG_HOME</span>.
      </p>
      <p>
        Set <span class="envvar">ERLANG_HOME</span> to where you actually put your Erlang installation, e.g.
        <span class="code ">C:\Program Files\erl<var>x.x.x</var></span> (full path).
        The RabbitMQ batch files expect to execute
        <span class="code "><span class="envvar">%ERLANG_HOME%</span>\bin\erl.exe</span>.
      </p>
      <p>
        Go to Start &gt; Settings &gt; Control Panel &gt; System &gt; Advanced &gt; Environment Variables.
        Create the system environment variable <span class="envvar">ERLANG_HOME</span>
        and set it to the full path of the directory which contains
        <span class="code ">bin\erl.exe</span>.
      </p>

      <h3>Install RabbitMQ Server</h3>
      <p>
        Download <span class="code ">rabbitmq-server-windows-2.8.7.zip</span>
        from the link above.
      </p>
      <p>
        From the zip file, extract the folder named
        <span class="code ">rabbitmq_server-2.8.7</span>
        into <span class="code ">C:\Program Files\RabbitMQ</span>
        (or somewhere suitable for application files).
      </p>
    </div>

    <div class="docSection"><a name="find-rabbitmq-on-windows" id="find-rabbitmq-on-windows"></a>
      <h2 class="docHeading">Finding Command Scripts and App Data</h2>
      <dl class="instructions">
        <dt>Commands for RabbitMQ Server</dt>
        <dd>
          <p>
            Within the <span class="code ">rabbitmq_server-2.8.7\sbin</span>
            directory are some scripts which run commands to control the RabbitMQ server.
          </p>
          <p>
            The RabbitMQ server can be run as either an application or service (not both).
          </p>
          <ul>
            <li><a href="man/rabbitmq-server.1.man.html">rabbitmq-server.bat</a>
              starts the broker as an application.</li>
            <li><a href="man/rabbitmq-service.man.html">rabbitmq-service.bat</a>
              manages the service and starts the broker.</li>
            <li><a href="man/rabbitmqctl.1.man.html">rabbitmqctl.bat</a>
              manages a running broker.</li>
          </ul>
          <p>
            Log in as an administrator. To see the output,
            run these from a
            <a href="http://windows.microsoft.com/en-GB/windows7/Command-Prompt-frequently-asked-questions">Command Prompt</a>
            in the <span class="code ">sbin</span> directory.
          </p>
          <p>
            <em>Note: </em>On Windows Vista (and later) you will need to
            <a href="http://windows.microsoft.com/en-GB/windows7/Command-Prompt-frequently-asked-questions">elevate privilege</a>
            (e.g. right-click on the icon to select Run as Administrator).
          </p>
        </dd>
        <dt>Find Commands Easily</dt>
        <dd>
          Set up the system path so you can find the server and
          <span class="code ">sbin</span> directory easily.
          <ul>
            <li>Create a system environment variable (e.g. RABBITMQ_SERVER) for
              <span class="code ">"C:\Program Files\RabbitMQ\rabbitmq_server-2.8.7"</span>.
              Adjust this if you put <span class="code ">rabbitmq_server-2.8.7</span> elsewhere,
              or if you upgrade versions.</li>
            <li>Append the literal string "<span class="code ">;%RABBITMQ_SERVER%\sbin</span>"
              to your system path (aka %PATH%).</li>
          </ul>
          Now you can run rabbitmq commands from any (administrator) Command Prompt.
          <p>
            You will need to navigate to <span class="code ">rabbitmq_server-2.8.7\sbin</span>
            to run commands if your system path does not contain the RabbitMQ <span class="code ">sbin</span>
            directory.
          </p>
        </dd>

        <dt>Synchronise Erlang Cookies (when running a manually installed Windows Service)</dt>
        <dd>
          <p>
            Erlang Security Cookies used by the service account and the user
            running <span class="code ">rabbitmqctl.bat</span> must be synchronised for
            <span class="code ">rabbitmqctl.bat</span> to function.
          </p>
          <p>
            To ensure Erlang cookie files contain the same string,
            copy the <span class="code ">.erlang.cookie</span> file from the Windows
            directory (normally <span class="code ">C:\WINDOWS\.erlang.cookie</span>)
            to replace the user <span class="code ">.erlang.cookie</span>.
            The user cookie will be in the user's home directory
            (<span class="envvar">%HOMEDRIVE%</span><span class="envvar">%HOMEPATH%</span>), e.g.
            <span class="code ">C:\Documents and Settings\<span class="envvar">%USERNAME%</span>\.erlang.cookie</span>
            or <span class="code ">C:\Users\<span class="envvar">%USERNAME%</span>\.erlang.cookie</span> (Windows Vista and later).
          </p>
        </dd>

        <dt>Finding Application Data</dt>
        <dd>
          <p>
            By default, the RabbitMQ logs and Mnesia database
            are stored in the current user's Application Data directory
            e.g. <span class="code ">C:\Documents and Settings\<span class="envvar">%USERNAME%</span>\Application Data</span> or
            <span class="code ">C:\Users\<span class="envvar">%USERNAME%</span>\AppData\Roaming</span>
            (Windows Vista and later).
          </p>
          <p>
            Execute <span class="code ">echo %APPDATA%</span> at a Command Prompt
            to find this directory. Alternatively,
            Start &gt; Run <span class="code ">%APPDATA%</span>
            will open this folder.
          </p>
        </dd>
      </dl>
    </div>

    <div class="docSection"><a name="running-windows" id="running-windows"></a>
      <h2 class="docHeading">Running RabbitMQ Server as an Application</h2>
      <p>
        The application is started by the <span class="code ">rabbitmq-server.bat</span>
        script in <span class="code ">sbin</span>.
      </p>

      <dl class="instructions">
        <dt>Customise RabbitMQ Server Environment Variables</dt>
        <dd>                
          Environment variable defaults are set within the
          <span class="code ">rabbitmq-server.bat</span> file.
          You may need to <a href="configure.html#customise-windows-environment">customise
            environment variables</a>
          for your installation.
        </dd>

        <dt>Start the Broker as an Application</dt>
        <dd>
          <p>
            Run the command <pre class="sourcecode">rabbitmq-server -detached</pre>
            Alternatively, you can double-click the
            <span class="code ">rabbitmq-server.bat</span> file in Windows Explorer.
          </p>
          <p>
            If you start by double-clicking, a Command Prompt window opens,
            displays a banner message, reports on progress in the startup sequence,
            and concludes with "broker running".
            This shows that the RabbitMQ broker has been started successfully.
          </p>
          <p>
            If you started without the <span class="code ">-detached</span> option,
            e.g. by double-clicking, you will need a second Command Prompt
            window to control the application cleanly.
            <em>Note: </em> Closing the original Command Prompt window
            will forcefully shut down a server started this way.
          </p>
        </dd>
        <dt>Stop or Manage the Broker</dt>
        <dd>
          <span class="code ">rabbitmq-server</span> only starts the broker.
          To <a href="#managing-windows">manage the broker</a> use
          <span class="code ">rabbitmqctl</span> commands.
        </dd>
      </dl>
    </div>

    <div class="docSection"><a name="running-windows-service" id="running-windows-service"></a>
      <h2 class="docHeading">Running RabbitMQ Server as a Service</h2>
      <p>
        The service will run in the security context of the system account
        without the need for a user to be logged in on a console.
        This is normally more appropriate for production use.
        The server should not be run as a
        service and application simultaneously.
      </p>
      <p>
        The service runs using the <span class="code ">rabbitmq-service.bat</span>
        script in <span class="code ">sbin</span>.
      </p>

      <dl class="instructions">
        <dt>Customise RabbitMQ Service Environment Variables</dt>
        <dd>
          <p>
            <em>Note: </em>After setting environment variables,
            you may need to install the service again.
          </p>
          <p>
            The <span class="code ">rabbitmq-service.bat</span> script
            recognises many of the same 
            <a href="configure.html#customise-windows-environment">environment variables</a>
            as <span class="code ">rabbitmq-server.bat</span>, as well as a few additional
            service environment variables.
          </p>
        </dd>

        <dt>Install the Service</dt>
        <dd>
          <p>
            Install the service by running
            <pre class="sourcecode">rabbitmq-service install</pre>
          </p>
          <p>
            A service with the name defined by <b>RABBITMQ_SERVICENAME</b>
            should now appear in the Windows Services control panel
            (Start &gt; Run <span class="code ">services.msc</span>).
          </p>
        </dd>

        <dt>Managing the Service</dt>
        <dd>
          <p>
            To manage the service (install, remove, start, stop,
            enable, disable), use
            <a href="man/rabbitmq-service.man.html"><span class="code ">rabbitmq-service.bat</span></a>
            commands.  You can also use the Windows Services panel
            (<span class="code ">services.msc</span>) to perform some of the
            same functions as the service script.
          </p>
        </dd>

        <dt>Start the Broker as a Service</dt>
        <dd>
          <p>
            To start the broker, execute
            <pre class="sourcecode">rabbitmq-service start</pre>
          </p>
          <p>
            If the output from this command is
            "<span class="code ">Service <i>RABBITMQ_SERVICENAME</i>
              started</span>", then the service was started
            correctly.
          </p>
          <p>
            Confirm the service named <b>RABBITMQ_SERVICENAME</b>
            reports a "Started" status in Services: <br />
            Start &gt; Run <span class="code ">services.msc</span>.
          </p>
        </dd>
      </dl>
    </div>

    <div class="docSection"><a name="managing-windows" id="managing-windows"></a>
  <h2 class="docHeading">Managing the Broker</h2>
  <p xmlns="">
    To stop the broker or check its status, use
    <span xmlns="http://www.w3.org/1999/xhtml" class="code ">rabbitmqctl.bat</span> in
    <span xmlns="http://www.w3.org/1999/xhtml" class="code ">sbin</span> (as an administrator).
  </p>

  <dl xmlns="" class="instructions">
    <dt>Stopping the Broker</dt>
    <dd>
      <p>
        Use <span xmlns="http://www.w3.org/1999/xhtml" class="code ">rabbitmqctl stop</span>.
      </p>
    </dd>

    <dt>Checking the Broker Status</dt>
    <dd>
      <p>
        Use <span xmlns="http://www.w3.org/1999/xhtml" class="code ">rabbitmqctl status</span>.
        All rabbitmqctl commands will report the node absence
        if no broker is running (i.e. nodedown).
      </p>
    </dd>
  </dl>
  <p xmlns="">
    More  <a href="man/rabbitmqctl.1.man.html">info on rabbitmqctl</a>
  </p>

  <h3 xmlns="">Logging</h3>
  <p xmlns="">
    Output from the server is sent to a
    <b>RABBITMQ_NODENAME</b>.log file in the
    <b>RABBITMQ_LOG_BASE</b> directory. Additional log data is
    written to <b>RABBITMQ_NODENAME</b>-sasl.log.
  </p>
  <p xmlns="">
    The broker always appends to the log files, so a complete
    log history is retained.
  </p>
  <p xmlns="">
    You can rotate logs using <span xmlns="http://www.w3.org/1999/xhtml" class="code ">rabbitmqctl rotate_logs</span>.
  </p>

  <h3 xmlns="">Troubleshooting When Running as a Service</h3>
  
  <p xmlns="">
    In the event that the erlang VM crashes whilst RabbitMQ is running
    as a service, rather than writing the crash dump to the current
    directory (which doesn't make sense for a service) it is written
    to an <span xmlns="http://www.w3.org/1999/xhtml" class="code ">erl_crash.dump</span> file in the base directory of
    the RabbitMQ server (set by the <b>RABBITMQ_BASE</b> environment
    variable, defaulting to <span xmlns="http://www.w3.org/1999/xhtml" class="code ">%APPDATA%\RabbitMQ</span>
    otherwise).
  </p>

</div>
  </div><div id="right-nav"><div class="in-this-page"><h4>In This Page</h4><ul><li><a href="#install-windows-separately"></a></li><li><a href="#find-rabbitmq-on-windows">Finding Command Scripts and App Data</a></li><li><a href="#running-windows">Running RabbitMQ Server as an Application</a></li><li><a href="#running-windows-service">Running RabbitMQ Server as a Service</a></li><li><a href="#managing-windows">Managing the Broker</a></li></ul></div><div id="related-links"><h4>Related Links</h4><ul><li><a href="/v2_8_x/windows-quirks.html">Windows Quirks</a></li></ul></div></div><div class="clear"></div><div class="pageFooter"><p class="righter"><a href="/v2_8_x/sitemap.html">Sitemap</a> |
        <a href="/v2_8_x/contact.html">Contact</a></p><p id="copyright">
        Copyright © 2013 VMware, Inc. All rights reserved.
        <a href="http://www.vmware.com/help/legal.html">Terms of Use</a> |
        <a href="http://www.vmware.com/help/privacy.html">Privacy</a></p></div></div></body>
</html>
